## HTTP architecture
- Unidirectional communication
- client sends an request, server sends back a response and close the connection.
- on every request, server will respond on the basis of api's.
- suppose user1 wants to broadcast a message, meantime some users has already opened the system on their device. So in order to recieve the braodcast message, online users needs to refresh the page, so that api will get triggered and new broadcast message can be shown to online users.


## To resolve this problem
1. Polling
2. WebSockets

## Polling
- clients sends request on every seconds to fetch new data.
- can be fetched real time data, but not efficient in case of server.
- server is sending back unneccessary data even when their is no new update.
- overkilling process, wastage of resources.
- problem of unidirectional and connection close after the server send response.

## Websockets
- Computer communication protocol providing full-duplex communication channels (from a to b or b to a).
- connection won't get closed after any response sends to client, can close mannually by triggering event 'close'.
- first request will be made to upgrade the protocal from https to websocket (or from https 1.0 to https 2.0), if server accepts it then connection will get established between client and server. 


## Socket.IO
To implement websocket in nodejs, we have a library called socket.io
````js
const express = require("express");
const http = require("http");
const {Server} = require('socket.io');

const app = express();
const server = http.createServer(app);
const io = new Server(server);

io.on('connection',(socket)=>{              // establish connection
    socket.on('user-message',(message)=>{   // event with 'user-message' will get triggered fronm client, then here it'll be taken care of 
        socket.emit("messages",message);    // emitting new event to client with 'messages'.
    })
})

server.listen(9000,()=>console.log(`Server is running on 9000`))

````
