## Aggregation is a powerful framework for complex operations like filtering, grouping, sorting, reshaping and summarizing data in a flexible way via pipeline.

- Clean and efficient way to execucute multiple operations in a single query.
- Stages defined in a array

```js
db.collection_name.aggrgate([
    // stages in object
    { },
    { }
])
```

## Stages
1. `$match` : Filters the documents on the basis of given criteria.
2. `$group` : grouping the resultant documents.
3. `$project` : reshaping/renaming the documents as per the need.
4. `$sort` : reorder the documents on the basis of given field.
5. `$limit` : restrict the number of documents that can be passed to another stage.
6. `$skip` : skip the first n documents and pass to next stage.
7. `$unwind` : applied to the fields which have array data type, It will destructure the array's elements into new separate documents.
8. `$out` : create a new temporary collection with the query resultants
9. `$lookup` : to implements joins

### Operators
usally performs in `$project` stage.
1. `$concat` : concate 2 strings like fullName = firstName + " " + lastName.
2. `$toUpper` : convert all characters to uppercase,  
3. `$regexMatch` : return true/false when matched with pattern
```js
db.cars.aggregate([
    {$project:{
        model:1,
        _id:1,
        is_diesal : {
            $regexMatch : {
                input : "$fuel_type",  // key - parameter
                regex : "Diesal"  // pattern 
            }
        }
    }}
])
```
4. `$add` : add the specified number in given field.


